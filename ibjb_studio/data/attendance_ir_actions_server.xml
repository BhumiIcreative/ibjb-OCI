<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
   <!-- Server action for handling employee check-out notifications in HR attendance.-->

    <record id="notifications_sortie" model="ir.actions.server">
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field eval="False" name="binding_model_id"/>
        <field name="name">Notifications Sorties</field>
        <field name="sequence">5</field>
        <field name="state">mail_post</field>
    </record>

<!-- Server action for sending notifications via email when a badge use event occurs in HR attendance.-->

    <record id="notifications_badgeuse" model="ir.actions.server">
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field ref="hr_attendance.model_hr_attendance" name="binding_model_id"/>
        <field name="name">Notifications Badgeuse</field>
        <field name="sequence">5</field>
        <field name="state">code</field>
        <field name="code">
            if records:
                 template = env.ref('ibjb_studio.presence_notification')
                 for record in records:
                    template.send_mail(record.id, force_send=True)
        </field>
    </record>

<!--  Server action for handling email notifications for badge use events in HR attendance.-->

    <record id="notifications_badgeuse_2" model="ir.actions.server">
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field eval="False" name="binding_model_id"/>
        <field name="name">Notifications Badgeuse</field>
        <field name="sequence">5</field>
        <field name="state">mail_post</field>
    </record>

<!--  Server action for processing badge use notifications via HTTP POST in HR attendance.-->

    <record id="notifications_badgeuse_http_post" model="ir.actions.server">
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field eval="False" name="binding_model_id"/>
        <field name="name">Notifications Badgeuse</field>
        <field name="sequence">5</field>
        <field name="state">code</field>
    </record>
</odoo>