<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- Define a new or modified tree view for the hr attendance model -->
    <record id="view_hr_attendance_tree_inherit" model="ir.ui.view">
        <field name="name">view.hr.attendance.tree.inherit</field>
        <field name="model">hr.attendance</field>
        <field name="inherit_id" ref="hr_attendance.view_attendance_tree"/>
        <field name="arch" type="xml">
            <field name="employee_id" position="before">
                <field name="id"/>
                <field name="badge"/>
            </field>
        </field>
    </record>

    <!-- Define an action for displaying unassigned helpdesk tickets -->
    <record id="action_menu_cumulative_attendance" model="ir.actions.act_window">
        <field name="name">Cumul des présences</field>
        <field name="context">{'pivot_measures': ['worked_hours'], 'pivot_column_groupby': ['check_in',
            'check_in:week'], 'pivot_row_groupby': ['employee_id']}
        </field>
        <field name="help"><![CDATA[<p class="o_view_nocontent_smiling_face">
                        This is your new action ; by default, it contains a list view and a form view.
                    </p>
                    <p>
                        You can start customizing these screens by clicking on the Studio icon on the
                        top right corner (you can also customize this help message there).
                    </p>
                ]]></field>
        <field name="res_model">hr.attendance</field>
        <field name="target">current</field>
        <field name="view_mode">pivot,tree,form,graph</field>
    </record>

    <!-- Define an action for displaying unassigned helpdesk tickets -->
    <record id="action_my_weekly_attendance" model="ir.actions.act_window">
        <field name="name">Mes présences hebdo</field>
        <field name="context">{'pivot_measures': ['worked_hours'], 'pivot_column_groupby': ['check_in',
            'check_in:week'], 'pivot_row_groupby': ['employee_id']}
        </field>
         <field name="domain">[("employee_id.user_id.id","=",uid)]</field>
        <field name="help"><![CDATA[<p class="o_view_nocontent_smiling_face">
                        This is your new action ; by default, it contains a list view and a form view.
                    </p>
                    <p>
                        You can start customizing these screens by clicking on the Studio icon on the
                        top right corner (you can also customize this help message there).
                    </p>
                ]]></field>
        <field name="res_model">hr.attendance</field>
        <field name="view_mode">pivot,tree,form,graph</field>
    </record>

    <!-- Add a new submenu under the helpdesk configuration menu -->
    <record id="menu_cumulative_attendance" model="ir.ui.menu">
        <field name="name">Cumulative attendance</field>
        <field name="parent_id" ref="hr_attendance.menu_hr_attendance_settings"/>
        <field name="action" ref="action_menu_cumulative_attendance"/>  <!-- Add the appropriate action -->
        <field name="sequence">12</field>
    </record>

    <!-- Add a new submenu under the helpdesk configuration menu -->
    <record id="menu_my_weekly_attendance" model="ir.ui.menu">
        <field name="name">My weekly attendance</field>
        <field eval="[(6, 0, [ref('hr_attendance.group_hr_attendance_manager')])]" name="groups_id"/>
        <field name="parent_id" ref="hr_attendance.menu_hr_attendance_settings"/>
        <field name="action" ref="action_my_weekly_attendance"/>  <!-- Add the appropriate action -->
        <field name="sequence">12</field>
    </record>


</odoo>