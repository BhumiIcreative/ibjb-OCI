<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!--Report template for Equipment Maintenance Report-->
    <template id="facture_ce_intracommunautaire_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <div class="col">
                            <i>
                                <font style="font-size: 15px;">15F_Fact_CE_VB-fr Rev B 07/2020</font>
                            </i>
                        </div>
                        <div class="row">
                            <div class="row address">
                                <div class="col-5"/>
                                <div class="col-5 offset-29px;" style="padding-left:150px;">
                                    <div t-field="doc.partner_id"
                                         t-options='{"widget": "contact", "fields": ["name", "address"]}'/>
                                    <span style="padding-left:20px;">
                                        <b>VAT No :</b>
                                    </span>
                                    <br/>
                                    <span style="padding-left:20px;">
                                        <b>Customer code :
                                            <span t-field="doc.vat_customer"/>
                                        </b>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="margin-top:10px;">
                            <div class="col-6">
                                <span>Please make an electronic wire transfer "all banking charges for the applicant"
                                    <br/>
                                    <b>SOCIETE GENERALE BANK</b>
                                    <br/>
                                    <b>IBAN</b>: FR76 3000 3036 2400 0200 0163 674
                                    <br/>
                                    <b>BIC :</b>
                                    SOGEFRPP
                                </span>
                            </div>
                            <div class="col-6">
                                <span style="padding-left:45px; display: block;">
                                    VAT exemption, article 262 ter, I of the General Tax Code
                                </span>
                            </div>

                        </div>
                        <div class="row">
                            <div t-if="doc.move_type == 'out_invoice'" class="col h2" style="margin-top:10px;">
                                <span style="margin-left:50px;">Invoice No.
                                    <span t-field="doc.name"/>
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div t-if="doc.move_type == 'out_refund'" class="col h2" style="margin-top:10px;">
                                <span>To have</span>
                            </div>
                        </div>
                        <div class="row" style="margin-top:10px;">
                            <div class="col-3">
                                <span>
                                    <strong>Your reference:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.ref"/>
                            </div>
                            <div class="col-3">
                                <span>
                                    <strong>Billing Date:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_date"/>
                            </div>
                            <div class="col-3">
                                <span>
                                    <strong>Order No.:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_origin"/>
                            </div>
                        </div>
                        <table class="table o_report_block_table">
                            <thead>
                                <tr>
                                    <th class="align-middle text-center">
                                        <span style="white-space: nowrap;">Article reference</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span style="white-space: nowrap;">Description</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span style="white-space: nowrap;">Quantity</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span style="white-space: nowrap;">Unit price excluding VAT</span>
                                    </th>
                                    <xpath expr="/t/t/div/table/thead/tr/th[4]" position="after">
                                        <th>
                                            <span class="align-middle text-center" style="white-space: nowrap;">Amount
                                                (excl. VAT)
                                            </span>
                                        </th>
                                    </xpath>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.invoice_line_ids" t-as="table_line">
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.product_id.default_code"/>
                                    </td>
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.name"/>
                                    </td>
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.quantity"/>
                                        <span t-field="table_line.product_uom_id.display_name"/>
                                    </td>
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.price_unit"/>
                                        <span>€</span>
                                    </td>
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.price_subtotal"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="row">
                            <div class="col-5"/>
                            <div class="col-5 offset-2">
                                <table class="table table-sm">
                                    <t t-set="total_currency_id" t-value="doc.currency_id"/>
                                    <t t-set="total_amount_total" t-value="doc.amount_total"/>
                                    <t t-set="total_amount_untaxed" t-value="doc.amount_untaxed"/>
                                    <t t-set="total_amount_by_groups" t-value="doc.tax_totals"/>
                                    <tr class="border-black o_subtotal">
                                        <td style="border-right:hidden;">
                                            <strong>Subtotal excluding VAT</strong>
                                        </td>
                                        <td class="text-right" style="text-align: right;">
                                            <span t-esc="total_amount_untaxed"
                                                  t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/>
                                        </td>
                                    </tr>
                                    <t t-if="total_amount_by_groups is None">
                                        <tr>
                                            <td style="border-right:hidden;">Taxes</td>
                                            <td class="text-right">
                                                <span t-esc="total_amount_total - total_amount_untaxed"
                                                      t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total">
                                        <td style="border-right:hidden;">
                                            <strong>Net to pay</strong>
                                        </td>
                                        <td class="text-right" style="text-align: right;">
                                            <span t-esc="total_amount_total"
                                                  t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span t-field="doc.narration"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:20px;">
                                <span>Please use the following communication for your payment :
                                    <span t-field="doc.name"/>
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:15px;">
                                <span>
                                    <font style="font-size: 11px;">
                                        <font style="font-size: 9px;">In the event that full payment
                                            is not made on the date
                                            agreed by the parties, the seller reserves the right to take back the
                                            item delivered and terminate the contract. No discount will be granted
                                            in the event of early payment. In the event of late or non-payment,
                                            late payment penalties are due the day following the payment
                                            date shown on the invoice, and calculated at the interest rate
                                            applied by the European Central Bank to its most recent
                                            refinancing operation plus 10 percentage points and without
                                            a reminder being necessary. In accordance with Articles 441-6 c.com and
                                            D. 441.5 c.com, any late payment for a professional automatically entails,
                                            in addition to late payment penalties, an obligation for the
                                            debtor to pay a fixed compensation of €40 for recovery
                                            costs. Additional compensation may be claimed, upon
                                            supporting documents, when the recovery costs incurred are greater
                                            than the amount of the fixed compensation.
                                        </font>
                                    </font>
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:30px;">
                                <span>
                                    <b>Delivery address :
                                        <br/>
                                    </b>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <div t-field="doc.partner_shipping_id"
                                     t-options='{"widget": "contact", "fields": ["name", "address"]}'/>
                            </div>
                            <div class="col-3">
                                <span>
                                    <strong>Payment Terms:</strong>
                                    <br/>
                                    <span t-field="doc.invoice_payment_term_id.name"/>
                                    <br/>
                                </span>
                            </div>
                            <div class="col-3">
                                <span>
                                    <strong>Due date:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_date_due"/>
                            </div>
                            <div class="col-3"/>
                        </div>
                        <div class="row">
                            <div class="col" style="font-size: 11px;margin-top:10px;">
                                <span>We certify that all products are of French origin and can circulate freely within
                                    the European community.
                                </span>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!--Report template for Non-EC Export Invoice-->
    <template id="facture_export_non_ce_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <div class="row">
                            <div class="col">
                                <i>
                                    <font style="font-size: 11px;">15F_Fact_EX - fr Rev B 07/2020</font>
                                </i>
                            </div>
                        </div>
                        <div class="row address">
                            <div class="col-5"/>
                            <div class="col-5 offset-2">
                                <div t-field="doc.partner_id"
                                     t-options='{"widget": "contact", "fields": ["name", "address"]}'/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span style="margin-left:528px;">
                                    <b>VAT No.:
                                        <span t-field="doc.partner_id.vat"/>
                                        <br/>
                                    </b>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span style="margin-left:528px;">
                                    <b>Customer code:
                                        <span t-field="doc.partner_id.customer_code"/>
                                        <br/>
                                    </b>
                                </span>
                            </div>
                        </div>
                        <div class="row" style="margin-top:20px;">
                            <div class="col-6">
                                <span>Please make an electronic wire transfer "all banking charges for the applicant".
                                    <br/>
                                    <span style="font-weight: bolder;">SOCIETE GENERALE BANK</span>
                                    <br/>
                                    <span style="font-weight: bolder;">IBAN </span>: FR76 3000 3036 2400 0200 0163 674
                                    <br/>
                                    <span style="font-weight: bolder;">BIC :</span> SOGEFRPP
                                    <br/>
                                </span>
                            </div>
                            <div class="col-6">
                                <span>VAT exemption, article 262, I of the General Tax Code</span>
                            </div>
                        </div>
                        <div class="row">
                            <div t-if="doc.move_type == 'out_invoice'" class="col h2"
                                 style="margin-top:10px;margin-left:50px;">
                                <span>Invoice No.
                                    <span t-field="doc.name"/>
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div t-if="doc.move_type == 'out_refund'" class="col h2" style="margin-top:10px">
                                <span style="margin-left:50px">To have</span>
                                <span t-field="doc.number"/>
                            </div>
                        </div>
                        <div class="row" style="margin-top:10px;">
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Your reference:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.name"/>
                            </div>
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Invoice date:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_date"/>
                            </div>
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Order No.:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_origin"/>
                            </div>
                        </div>
                        <table class="table o_report_block_table" style="margin-top:20px;">
                            <thead>
                                <tr>
                                    <th class="align-middle text-center">
                                        <span>Référence produit</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Description</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Quantité</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Prix unit. HT</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Montant (HT)</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.invoice_line_ids" t-as="table_line">
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.product_id.default_code"/>
                                    </td>
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.name"/>
                                    </td>
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.quantity"/>
                                        <span t-field="table_line.product_uom_id.display_name"/>
                                    </td>
                                    <td style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.price_unit"/>
                                        <span>€</span>
                                    </td>
                                    <td class="text-right" style="border-bottom: 0 solid transparent;">
                                        <span t-field="table_line.price_subtotal"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="row">
                            <div class="col-5"/>
                            <div class="col-5 offset-2">
                                <table class="table table-sm o_report_block_total">
                                    <t t-set="total_currency_id" t-value="doc.currency_id"/>
                                    <t t-set="total_amount_total" t-value="doc.amount_total"/>
                                    <t t-set="total_amount_untaxed" t-value="doc.amount_untaxed"/>
                                    <t t-set="total_amount_by_groups" t-value="doc.tax_totals"/>
                                    <tr class="border-black o_subtotal">
                                        <td style="border-right:hidden;">
                                            <strong>Subtotal excluding VAT</strong>
                                        </td>
                                        <td class="text-right">
                                            <span t-esc="total_amount_untaxed"
                                                  t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/>
                                        </td>
                                    </tr>
                                    <t t-if="total_amount_by_groups is None">
                                        <tr>
                                            <td style="border-right:hidden;">Taxes</td>
                                            <td class="text-right">
                                                <span t-esc="total_amount_total - total_amount_untaxed"
                                                      t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total">
                                        <td style="border-right:hidden;">
                                            <strong>Net to pay</strong>
                                        </td>
                                        <td class="text-right">
                                            <span t-esc="total_amount_total"
                                                  t-options="{'widget': 'monetary', 'display_currency': total_currency_id}"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:10px;">
                                <span t-field="doc.narration"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:10px;">
                                <span>Please use the following communication for your payment :</span>
                                <span t-field="doc.name"/>
                            </div>
                        </div>
                        <div class="row">
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:10px;">
                                <span>
                                    <font style="font-size: 10px;">In the event that full payment
                                        is not made on the date agreed by the parties, the seller
                                        reserves the right to take back the item delivered and terminate the contract.
                                        No discount will be granted in the event of early payment. In the event of late
                                        or
                                        non-payment, late payment penalties are due the day following the payment
                                        date shown on the invoice, and calculated at the interest rate
                                        applied by the European Central Bank to its most recent refinancing
                                        operation plus 10 percentage points and without a reminder being
                                        necessary. In accordance with Articles 441-6 of the French Commercial Code and
                                        D. 441.5 of the French Commercial Code, any late payment for a professional
                                        automatically entails,
                                        in addition to late payment penalties, an obligation for the
                                        debtor to pay a fixed compensation of €40 for recovery costs. Additional
                                        compensation may be claimed,
                                        upon supporting documents, when the recovery costs incurred are greater
                                        than the amount of the fixed compensation.
                                    </font>
                                    <br/>
                                    <br/>
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span>
                                    <b>Delivery address:
                                        <br/>
                                    </b>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <div t-field="doc.partner_shipping_id"
                                     t-options='{"widget": "contact", "fields": ["name", "address"]}'/>
                            </div>
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Payment Terms:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_payment_term_id.name"/>
                            </div>
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Due date:</strong>
                                    <span t-field="doc.invoice_date_due"/>
                                    <br/>
                                </span>
                            </div>
                            <div class="col-3"/>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:15px">
                                <span>We certify that all products are of French origin and can circulate
                                    freely within the European community.
                                </span>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!--Report template for Facto Invoice (cic)-->
    <template id="facture_facto_cic_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <div class="page">
                        <div class="row">
                            <div class="col">
                                <span>
                                    <i style="font-size: 11px;">15F InvoiceFR facto Rev A 07/2020</i>
                                </span>
                            </div>
                        </div>
                        <div class="row address">
                            <div class="col-5"/>
                            <div class="col-5 offset-2">
                                <div t-field="doc.partner_id"
                                     t-options='{"widget": "contact", "fields": ["name", "address"]}'/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span style="margin-left:505px;">
                                    <b>VAT No.:
                                        <span t-field="doc.partner_id.vat"/>
                                        <br/>
                                    </b>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span style="margin-left:505px;">
                                    <b>Customer code:
                                        <span t-field="doc.partner_id.customer_code"/>
                                        <br/>
                                    </b>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span>Please make an electronic transfer "all bank charges for the applicant".
                                    <br/>
                                    <b>Banque CIC - CM-CIC FACTOR</b>
                                    <br/>
                                    <b>IBAN</b>: FR76 1197 8000 0101 3312 17070 74
                                    <br/>
                                    <b>BIC :</b>
                                    CMCIFRPPXXX
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div t-if="doc.move_type == 'out_invoice'" class="col h2" style="margin-top:15px;">
                                <span style="margin-left:50px;">Invoice No.
                                    <span t-field="doc.name"/>
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div t-if="doc.move_type == 'out_refund'" class="col h2" style="margin-top:10px;">
                                <span style="margin-left:50px;">To have</span>
                                <span t-field="doc.name"/>
                            </div>
                        </div>
                        <div class="row" style="margin-top:15px;">
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Your reference:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.name"/>
                            </div>
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Invoice date:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_date"/>
                            </div>
                            <div class="col-auto mw-100 mb-2">
                                <span>
                                    <strong>Order No.:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_origin"/>
                            </div>
                        </div>
                        <table class="table o_report_block_table" style="margin-top:30px;">
                            <thead>
                                <tr>
                                    <th class="align-middle text-center">
                                        <span>Article reference</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Description</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Quantity</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Unit price excluding VAT</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>VAT</span>
                                    </th>
                                    <th class="align-middle text-center">
                                        <span>Amount (excl. VAT)</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="doc.invoice_line_ids" t-as="table_line" t-esc-options='{"last": true}'
                                    class="table table-sm o_main_table">
                                    <!-- Apply styles conditionally based on whether this is the last row -->
                                    <td t-if="table_line == doc.invoice_line_ids[-1]"
                                        style="border-bottom: 1px solid black;">
                                        <span t-field="table_line.product_id.default_code"/>
                                    </td>
                                    <td t-else="" style="border-bottom: hidden;">
                                        <span t-field="table_line.product_id.default_code"/>
                                    </td>

                                    <td t-if="table_line == doc.invoice_line_ids[-1]"
                                        style="border-bottom: 1px solid black;">
                                        <span t-field="table_line.name"/>
                                    </td>
                                    <td t-else="" style="border-bottom: hidden;">
                                        <span t-field="table_line.name"/>
                                    </td>

                                    <td t-if="table_line == doc.invoice_line_ids[-1]"
                                        style="border-bottom: 1px solid black;">
                                        <span t-field="table_line.product_uom_id.display_name"/>
                                    </td>
                                    <td t-else="" style="border-bottom:hidden;">
                                        <span t-field="table_line.product_uom_id.display_name"/>
                                    </td>

                                    <td t-if="table_line == doc.invoice_line_ids[-1]"
                                        style="border-bottom: 1px solid black;">
                                        <span t-field="table_line.price_unit"/>
                                        <span>€</span>
                                    </td>
                                    <td t-else="" style="border-bottom: hidden;">
                                        <span t-field="table_line.price_unit"/>
                                        <span>€</span>
                                    </td>

                                    <td t-if="table_line == doc.invoice_line_ids[-1]"
                                        style="border-bottom: 1px solid black;">
                                        <t t-foreach="table_line.tax_ids" t-as="tax">
                                            <span t-field="tax.description"/>
                                        </t>
                                    </td>
                                    <td t-else="" style="border-bottom: hidden;">
                                        <t t-foreach="table_line.tax_ids" t-as="tax">
                                            <span t-field="tax.description"/>
                                        </t>
                                    </td>

                                    <td t-if="table_line == doc.invoice_line_ids[-1]" class="text-right"
                                        style="border-bottom: 1px solid black;">
                                        <span t-field="table_line.price_subtotal"/>
                                    </td>
                                    <td t-else="" class="text-right" style="border-bottom: hidden;">
                                        <span t-field="table_line.price_subtotal"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="row">
                            <div class="col-5"/>
                            <div class="col-5 offset-2">
                                <table class="table table-sm o_report_block_total">
                                    <t t-set="tax_totals" t-value="doc.tax_totals or {}"/>
                                    <t t-call="account.document_tax_totals"/>
                                </table>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span style="margin-top:10px;">
                                    <b>CM-CIC Factor within the scope of the article L313-23 to L313-35 of
                                        the french financial and monetary code. In order to be fully discharged
                                        from this Debt, payment should be made by check to<br/>CM-CIC Factor<br/>CIC
                                        Direction des Grands Comptes<br/>57, rue de la Victoire 75009 PARIS France
                                        <br/>
                                        Tel : +33(1).49.74.56.00<br/>Or by wire transfer :<br/>Bank CIC - CM-CIC Factor
                                        - BIC CMCIFRPPXXX - IBAN FR76 1197 8000 0101 3676 17070 55
                                        <br/>
                                    </b>
                                    <br/>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:20px;">
                                <span t-field="doc.narration"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:10px;">
                                <span>
                                    <font style="font-size: 11px;">
                                        <font style="font-size: 10px;">Any amount including VAT not paid on the due date
                                            will give rise to the payment of penalties by the
                                            customer. The interest rate for late payment penalties is equal to
                                            the most recent half-yearly key rate (refinancing rate or Refi) of the
                                            European Central Bank (ECB) plus 10 points.
                                            These penalties are due automatically and will be automatically debited
                                            from the customer account. No reminder or formal notice is
                                            necessary to incur late payment penalties. They start to run from the
                                            day following the payment date shown on the invoice. In addition,
                                            we reserve the right to suspend delivery of current orders. No discount will
                                            be granted in the event of early payment. In
                                            the event of late payment, the buyer will owe a fixed compensation
                                            for recovery costs in the amount of 40 euros, automatically and
                                            without prior notification. We may ask the buyer for additional compensation
                                            if the recovery costs actually incurred exceed this amount, upon
                                            presentation of supporting documents.
                                        </font>
                                    </font>
                                </span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col" style="margin-top:10px;">
                                <b>Delivery address:
                                    <br/>
                                </b>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-3">
                                <div t-field="doc.partner_shipping_id"
                                     t-options='{"widget": "contact", "fields": ["name", "address"]}'/>
                            </div>
                            <div class="col-3">
                                <span>
                                    <strong>Payment Terms:</strong>
                                    <br/>
                                </span>
                                <span t-field="doc.invoice_payment_term_id.name"/>
                            </div>
                            <div class="col-3">
                                <span>
                                    <strong>Due date:</strong>
                                    <br/>
                                    <span t-field="doc.invoice_date_due"/>
                                </span>
                            </div>
                            <div class="col-3"/>
                        </div>
                        <div class="row">
                            <div t-if="doc.partner_id.lang == 'en_US'" class="col" style="margin-top:10px;">
                                <span>We certify that all the goods are French origin and can circulate in the European
                                    Community.
                                </span>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
    <template id="tax_groups_totals_inherit" inherit_id="account.tax_groups_totals">
        <xpath expr="//t[1]/tr[1]/t[1]/td[1]/span[2]" position='replace'/>
        <xpath expr="//t[@t-else='']/td[1]/span[2]" position='replace'>
        </xpath>
        <xpath expr="//t[@t-else='']/td[1]/span[2]" position='replace'>
        </xpath>
    </template>

    <!--Report template for VAT Exemption Invoice-->
    <template id="facture_franchise_de_tva_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="lang" t-value="o.partner_id.lang"/>
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=lang)"/>
                    <t t-set="forced_vat"
                       t-value="o.fiscal_position_id.foreign_vat"/> <!-- So that it appears in the footer of the report instead of the company VAT if it's set -->
                    <div class="row">
                        <t t-if="o.partner_shipping_id and (o.partner_shipping_id != o.partner_id)">
                            <div class="col-12" style="padding-left:60%;">
                                <div>
                                    <t>
                                        <div groups="account.group_delivery_invoice_address"
                                             name="shipping_address_block">
                                            <strong>Delivery address:</strong>
                                            <div t-field="o.partner_shipping_id"
                                                 t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                            <div t-if="o.partner_id.vat" id="partner_vat_address_not_same_as_shipping">
                                                <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                                                   t-out="o.company_id.account_fiscal_country_id.vat_label"
                                                   id="inv_tax_id_label"/>
                                                <t t-else="">Tax ID</t>:
                                                <span t-field="o.partner_id.vat"/>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                                <div name="address_not_same_as_shipping">
                                    <t>
                                        <address class="mb-0" t-field="o.partner_id"
                                                 t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                        <div t-if="o.partner_id.vat" id="partner_vat_address_not_same_as_shipping">
                                            <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                                               t-out="o.company_id.account_fiscal_country_id.vat_label"
                                               id="inv_tax_id_label"/>
                                            <t t-else="">Tax ID</t>:
                                            <span t-field="o.partner_id.vat"/>
                                        </div>
                                    </t>
                                </div>
                            </div>
                        </t>
                        <t t-elif="o.partner_shipping_id and (o.partner_shipping_id == o.partner_id)">
                            <div class="col-12" name="address_same_as_shipping" style="padding-left:60%;">
                                <t>
                                    <address class="mb-0" t-field="o.partner_id"
                                             t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                    <div t-if="o.partner_id.vat" id="partner_vat_address_same_as_shipping">
                                        <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                                           t-out="o.company_id.account_fiscal_country_id.vat_label"
                                           id="inv_tax_id_label"/>
                                        <t t-else="">Tax ID</t>:
                                        <span t-field="o.partner_id.vat"/>
                                    </div>
                                </t>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="offset-col-6 col-6" name="no_shipping" style="padding-left:60%;">
                                <t>
                                    <address class="mb-0" t-field="o.partner_id"
                                             t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                    <div t-if="o.partner_id.vat" id="partner_vat_no_shipping">
                                        <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                                           t-out="o.company_id.account_fiscal_country_id.vat_label"
                                           id="inv_tax_id_label"/>
                                        <t t-else="">Tax ID</t>:
                                        <span t-field="o.partner_id.vat"/>
                                    </div>
                                </t>
                            </div>
                        </t>
                    </div>
                    <div class="row">
                        <div class="col">
                            <span style="padding-left:60%;">Customer code :
                                <span t-field="o.partner_id.customer_code"/>
                                <br/>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <span style="margin-top:10px">15F_Fact_CE_VB-en Revision A January 2016
                                <br/>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <span>
                                <p style="margin-top:10px">
                                    <b>KOLB BANK</b>
                                    <br/>
                                    <b>IBAN</b>: FR7613259041531058110020064
                                    <br/>
                                    <b>BIC :</b>
                                    KOLBFR71
                                    <br/>
                                </p>
                            </span>
                        </div>
                        <div class="col-6">
                            <span>VAT exemption, article 262 ter, I of the general tax code</span>
                        </div>
                    </div>
                    <div class="mt-5 clearfix">
                        <div class="page mb-4">
                            <h2>
                                <span t-if="o.move_type == 'out_invoice' and o.state in ('open', 'in_payment', 'paid')">
                                    Bill
                                </span>
                                <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft invoice
                                </span>
                                <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Invoice cancelled
                                </span>
                                <span t-if="o.move_type == 'out_refund'">To have</span>
                                <span t-if="o.move_type == 'in_refund'">Supplier credit</span>
                                <span t-if="o.move_type == 'in_invoice'">Supplier invoice</span>
                                <span t-field="o.name"/>
                            </h2>
                            <div id="informations" class="row mt32 mb32">
                                <div class="col-auto mw-100 mb-2" t-if="o.name" name="description">
                                    <strong>Description :</strong>
                                    <p class="m-0" t-field="o.name"/>
                                </div>
                                <div class="col-auto mw-100 mb-2" t-if="o.invoice_date" name="invoice_date">
                                    <strong>Invoice date :</strong>
                                    <p class="m-0" t-field="o.invoice_date"/>
                                </div>
                                <div class="col-auto mw-100 mb-2"
                                     t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state in ('open', 'in_payment', 'paid')"
                                     name="due_date">
                                    <strong>Due date :</strong>
                                    <p class="m-0" t-field="o.invoice_date_due"/>
                                </div>
                                <div class="col-auto mw-100 mb-2" t-if="o.invoice_origin" name="invoice_origin">
                                    <strong>Origin :</strong>
                                    <p class="m-0" t-field="o.invoice_origin"/>
                                </div>
                                <div class="col-auto mw-100 mb-2" t-if="o.partner_id.ref" name="customer_code">
                                    <strong>Customer number :</strong>
                                    <p class="m-0" t-field="o.partner_id.ref"/>
                                </div>
                                <div name="ref" class="col-auto mw-100 mb-2" t-if="o.ref">
                                    <strong>Reference :</strong>
                                    <p class="m-0" t-field="o.ref"/>
                                </div>
                                <div t-att-class="o_grid_layout" t-if="o.incoterm_id"
                                     groups="sale_stock.group_display_incoterm">
                                    <strong>Incoterms :</strong>
                                    <p t-field="o.incoterm_id.code"/>
                                </div>
                            </div>

                            <t t-set="display_discount" t-value="any(l.discount for l in o.invoice_line_ids)"/>
                            <div class="oe_structure"></div>
                            <table class="table table-sm o_main_table table-borderless" name="invoice_line_table">
                                <thead>
                                    <tr>
                                        <t t-set="colspan" t-value="6"/>
                                        <th>
                                            <span>Internal reference</span>
                                        </th>
                                        <th class="text-left">
                                            <span>Description</span>
                                        </th>
                                        <th class="d-none text-left">
                                            <span>Source Documente</span>
                                        </th>
                                        <th class="text-right">
                                            <span>Quantity</span>
                                        </th>
                                        <th t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Unit Price</span>
                                        </th>
                                        <th t-if="display_discount"
                                            t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>Rem.(%)</span>
                                            <!-- TODO: remove in master -->
                                            <t t-set="colspan" t-value="colspan+1"/>
                                        </th>
                                        <th t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span>VAT</span>
                                        </th>
                                        <th>
                                            <span>Amount (excl. VAT)</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="invoice_tbody">
                                    <t t-set="current_subtotal" t-value="0"/>
                                    <t t-set="current_total" t-value="0"/>
                                    <t t-set="lines"
                                       t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>

                                    <t t-foreach="lines" t-as="line">
                                        <t t-set="current_subtotal"
                                           t-value="current_subtotal + line.price_subtotal"/>
                                        <t t-set="current_total" t-value="current_total + line.price_total"/>

                                        <tr t-att-class="'bg-200 fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                            <t t-if="line.display_type == 'product'"
                                               name="account_invoice_line_accountable">
                                                <td name="account_invoice_line_name">
                                                    <span t-field="line.product_id.default_code"/>
                                                </td>
                                                <td name="account_invoice_line_name">
                                                    <span t-field="line.name"/>
                                                </td>
                                                <td class="d-none">
                                                    <span t-field="line.invoice_origin"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line.quantity"/>
                                                    <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                                </td>
                                                <td t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                    <span t-field="line.price_unit"/>
                                                </td>
                                                <td t-if="display_discount"
                                                    t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                    <span t-field="line.discount"/>
                                                </td>
                                                <td t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                                    <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))"/>
                                                </td>
                                                <td>
                                                    <span t-field="line.price_subtotal"/>
                                                </td>
                                            </t>
                                            <t t-elif="line.display_type == 'line_section'">
                                                <td colspan="99">
                                                    <span t-field="line.name" t-options="{'widget': 'text'}">A
                                                        section title
                                                    </span>
                                                </td>
                                                <t t-set="current_section" t-value="line"/>
                                                <t t-set="current_subtotal" t-value="0"/>
                                            </t>
                                            <t t-elif="line.display_type == 'line_note'">
                                                <td colspan="99">
                                                    <span t-field="line.name" t-options="{'widget': 'text'}">A note,
                                                        whose content usually applies to the section or product
                                                        above.
                                                    </span>
                                                </td>
                                            </t>
                                        </tr>

                                        <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                            <tr class="is-subtotal text-end">
                                                <td colspan="99">
                                                    <strong class="mr16">Subtotal</strong>
                                                    <span
                                                            t-out="current_subtotal"
                                                            t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                                    >31.05
                                                    </span>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                            <div>
                                <div id="right-elements"
                                     t-attf-class="#{'col-5' if report_type != 'html' else 'col-12 col-md-5'} ms-5 d-inline-block float-end">
                                    <div id="total" class="clearfix row">
                                        <div class="ms-auto">
                                            <table class="table table-sm table-borderless avoid-page-break-inside">

                                                <!--Tax totals-->
                                                <t t-set="tax_totals" t-value="o.tax_totals or {}"/>
                                                <t t-call="account.document_tax_totals"/>

                                                <!--Payments-->
                                                <t t-if="print_with_payments">
                                                    <t t-if="o.payment_state != 'invoicing_legacy'">
                                                        <t t-set="payments_vals"
                                                           t-value="o.sudo().invoice_payments_widget and o.sudo().invoice_payments_widget['content'] or []"/>
                                                        <t t-foreach="payments_vals" t-as="payment_vals">
                                                            <tr t-if="payment_vals['is_exchange'] == 0">
                                                                <td>
                                                                    <i class="oe_form_field text-end oe_payment_label">
                                                                        Paid on
                                                                        <t t-out="payment_vals['date']"
                                                                           t-options='{"widget": "date"}'>2021-09-19
                                                                        </t>
                                                                    </i>
                                                                </td>
                                                                <td class="text-end">
                                                                    <span t-out="payment_vals['amount']"
                                                                          t-options='{"widget": "monetary", "display_currency": o.currency_id}'>
                                                                        20.00
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                        </t>
                                                        <t t-if="len(payments_vals) > 0">
                                                            <tr class="border-black fw-bold">
                                                                <td>Amount Due</td>
                                                                <td class="text-end">
                                                                    <span t-field="o.amount_residual">11.05</span>
                                                                </td>
                                                            </tr>
                                                        </t>
                                                    </t>
                                                </t>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        <p class="text-end lh-sm"
                                           t-if="o.company_id.display_invoice_amount_total_words">
                                            Total amount in words:
                                            <br/>
                                            <small class="text-muted lh-sm">
                                                <span t-field="o.amount_total_words">Thirty one dollar and Five
                                                    cents
                                                </span>
                                            </small>
                                        </p>
                                    </div>
                                    <t t-call="account.document_tax_totals_company_currency_template"/>
                                </div>
                                <div id="payment_term" class="clearfix">
                                    <div class="justify-text">
                                        <p t-if="not is_html_empty(o.fiscal_position_id.note)" name="note"
                                           class="mb-2">
                                            <span t-field="o.fiscal_position_id.note"/>
                                        </p>
                                    </div>
                                    <t t-set="payment_term_details" t-value="o.payment_term_details"/>
                                    <div class="mb-3">
                                        <span id="payment_terms_note_id"
                                              t-if="o.invoice_payment_term_id.note"
                                              t-field="o.invoice_payment_term_id.note"
                                              name="payment_term">Payment within 30 calendar day
                                        </span>
                                        <br/>
                                        <t t-if="o.invoice_payment_term_id.display_on_invoice and payment_term_details">
                                            <div t-if='o.show_payment_term_details'
                                                 id="total_payment_term_details_table" class="row">
                                                <div t-attf-class="#{'col-10' if report_type != 'html' else 'col-sm-10 col-md-9'}">
                                                    <t t-if="o._is_eligible_for_early_payment_discount(o.currency_id,o.invoice_date)">
                                                        <td>
                                                            <span t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                                                  t-out="o.invoice_payment_term_id._get_amount_due_after_discount(o.amount_total, o.amount_tax)">
                                                                30.00
                                                            </span>
                                                            due if paid before
                                                            <span t-out="o.invoice_payment_term_id._get_last_discount_date_formatted(o.invoice_date)">
                                                                2024-01-01
                                                            </span>
                                                        </td>
                                                    </t>
                                                    <t t-if="len(payment_term_details) > 1"
                                                       t-foreach="payment_term_details" t-as="term">
                                                        <div>
                                                            <span t-out="term_index + 1">1</span>
                                                            - Installment of
                                                            <t t-options='{"widget": "monetary", "display_currency": o.currency_id}'
                                                               t-out="term.get('amount')" class="text-end">31.05
                                                            </t>
                                                            <span>due on</span>
                                                            <t t-out="term.get('date')" class="text-start">
                                                                2024-01-01
                                                            </t>
                                                        </div>
                                                    </t>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                    <t t-set="show_qr" t-value="o.display_qr_code and o.amount_residual > 0"/>
                                    <div t-if="not show_qr" name="qr_code_placeholder" class="oe_structure"></div>
                                    <div id="qrcode" class="d-flex mb-3 avoid-page-break-inside" t-else="">
                                        <div class="qrcode me-3" id="qrcode_image">
                                            <t t-set="qr_code_url"
                                               t-value="o._generate_qr_code(silent_errors=True)"/>
                                            <p t-if="qr_code_url" class="position-relative mb-0">
                                                <img t-att-src="qr_code_url"/>
                                                <img src="/account/static/src/img/Odoo_logo_O.svg"
                                                     id="qrcode_odoo_logo"
                                                     class="top-50 start-50 position-absolute bg-white border border-white border-3 rounded-circle"
                                                />
                                            </p>
                                        </div>
                                        <div class="d-inline text-muted lh-sm fst-italic" id="qrcode_info"
                                             t-if="qr_code_url">
                                            <p>Scan this QR Code to<br/>pay with your mobile
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p t-if="o.ref">
                                Please use the following communication for your payment :
                                <b>
                                    <span t-field="o.ref"/>
                                </b>
                            </p>
                            <p t-if="o.narration" name="narration">
                                <span t-field="o.narration"/>
                            </p>
                            <p t-if="o.invoice_payment_term_id" name="payment_term">
                                <span t-field="o.invoice_payment_term_id.note"/>
                            </p>
                            <div class="row">
                                <div class="col">
                                    <span>
                                        <font style="font-size: 10px;">
                                            <p>In the event that full payment is not made on the date agreed
                                                by the parties, the
                                                seller reserves the right
                                                <br/>
                                            </p>
                                        </font>
                                        <br/>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <span>We certify that all products are of French origin and can circulate
                                        freely in
                                        the European community.
                                        <br/>
                                    </span>
                                </div>
                            </div>
                            <p t-if="o.fiscal_position_id.note" name="note">
                                <span t-field="o.fiscal_position_id.note"/>
                            </p>
                            <div id="qrcode"
                                 t-if="(o.partner_id.country_id.code in ['BE', 'AT', 'DE', 'FI', 'NL']) and (o.company_id.qr_code) and (o.currency_id.name == 'EUR') and (o.partner_bank_id.acc_number != False)">
                                <p t-if="(o.partner_bank_id.qr_code_valid)">
                                    <strong class="text-center">Scan me with your banking app.</strong>
                                    <br/>
                                    <br/>
                                    <img class="border border-dark rounded"
                                         t-att-src="o.partner_bank_id.build_qr_code_url(o.residual,(o.reference) if (o.reference) else o.number)"/>
                                </p>
                                <p t-if="(o.partner_bank_id.qr_code_valid == False)">
                                    <strong class="text-center">The SEPA QR Code information is not
                                        correctly defined.
                                    </strong>
                                    <br/>
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>